openapi: 3.0.3
info:
  title: "Telemetry API components"
  description: "The common telemetry API components"
  version: 1.0.0
paths: {}
components:
  schemas:
    Block:
      description: The block.
      type: object
      properties:
        block_id:
          type: string
        stream_id:
          type: string
        begin_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        begin_ticks:
          type: integer
          format: int64
        end_ticks:
          type: integer
          format: int64
        nb_objects:
          type: integer
        payload:
          $ref: "#/components/schemas/BlockPayload"
      required:
        - block_id
        - stream_id
        - begin_time
        - end_time
        - begin_ticks
        - end_ticks
        - nb_objects
    BlockPayload:
      description: The block payload.
      type: object
      properties:
        dependencies:
          type: string
          format: byte
        objects:
          type: string
          format: byte
      required:
        - dependencies
        - objects
    BlockMetadata:
      description: The block metadata.
      type: object
      properties:
        block_id:
          type: string
        stream_id:
          type: string
        begin_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        begin_ticks:
          type: integer
          format: int64
        end_ticks:
          type: integer
          format: int64
        nb_objects:
          type: integer
        payload_size:
          type: integer
          format: int64
      required:
        - block_id
        - stream_id
        - begin_time
        - end_time
        - begin_ticks
        - end_ticks
        - nb_objects
        - payload_size
    Process:
      description: The process.
      type: object
      properties:
        process_id:
          type: string
        exe:
          type: string
        username:
          type: string
        realname:
          type: string
        computer:
          type: string
        distro:
          type: string
        cpu_brand:
          type: string
        tsc_frequency:
          type: integer
          format: int64
          minimum: 0
        start_time:
          type: string
          format: date-time
        start_ticks:
          type: integer
          format: int64
        parent_process_id:
          type: string
      required:
        - process_id
        - exe
        - username
        - realname
        - computer
        - distro
        - cpu_brand
        - tsc_frequency
        - start_time
        - start_ticks
        - parent_process_id
    Stream:
      description: The stream.
      type: object
      properties:
        stream_id:
          type: string
        process_id:
          type: string
        dependencies_metadata:
          $ref: "#/components/schemas/ContainerMetadata"
        objects_metadata:
          $ref: "#/components/schemas/ContainerMetadata"
        tags:
          type: array
          items:
            type: string
      additionalProperties:
        type: string
      required:
        - stream_id
        - process_id
        - tags
        - properties
    ContainerMetadata:
      description: The container metadata.
      type: object
      properties:
        types:
          type: array
          items:
            $ref: "#/components/schemas/UserDefinedType"
      required:
        - types
    UserDefinedType:
      description: The user defined type.
      type: object
      properties:
        name:
          type: string
        size:
          type: integer
          minimum: 0
        members:
          type: array
          items:
            $ref: "#/components/schemas/UdtMember"
        is_reference:
          type: boolean
      required:
        - name
        - size
        - members
        - is_reference
    UdtMember:
      description: The user defined type member.
      type: object
      properties:
        name:
          type: string
        type_name:
          type: string
        offset:
          type: integer
          minimum: 0
        size:
          type: integer
          minimum: 0
        is_reference:
          type: boolean
      required:
        - name
        - type_name
        - offset
        - size
        - is_reference
