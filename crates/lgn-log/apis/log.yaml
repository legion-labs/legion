openapi: 3.1.0
info:
  title: "Log Stream API"
  description: "The OpenAPI specification for the Legion Labs log service."
  version: 1.0.0
paths:
  /v1/spaces/{space-id}/workspace/{workspace-id}/session/log/:
    parameters:
      - $ref: "../../lgn-governance/apis/space.yaml#/components/parameters/space_id"
      - $ref: "../../lgn-governance/apis/workspace.yaml#/components/parameters/workspace_id"
    get:
      description: Get the last log entries.
      operationId: logEntries
      responses:
        "200":
          description: Ok.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TraceEvent"

components:
  schemas:
    TraceEvent:
      description: A trace object that representes one entry in the log
      type: object
      required: ["level", "time", "target", "message"]
      properties:
        level:
          type: string
          enum: [Error, Warn, Info, Debug, Trace]
        time:
          type: integer
          format: int64
        target:
          type: string
        message:
          type: string
